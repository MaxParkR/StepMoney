<!--
  Vista de Consejos Financieros
  Biblioteca educativa con tips sobre finanzas personales
-->

<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Consejos</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  
  <!-- Encabezado grande -->
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Consejos</ion-title>
    </ion-toolbar>
  </ion-header>

  <!-- Sección de Búsqueda Moderna -->
  <div class="search-section">
    <div class="search-header">
      <h2>Aprende sobre Finanzas</h2>
      <ion-icon name="bulb-outline"></ion-icon>
    </div>
    <ion-searchbar 
      [(ngModel)]="searchTerm"
      (ionInput)="onSearch($event)"
      placeholder="Buscar consejos..."
      animated="true"
      class="modern-searchbar">
    </ion-searchbar>
  </div>

  <!-- Filtros por categoría modernos -->
  <div class="categories-section">
    <div class="categories-scroll">
      <div 
        *ngFor="let category of categories"
        class="category-chip-modern"
        [class.active]="selectedCategory === category.value"
        (click)="filterByCategory(category.value)">
        <ion-icon [name]="category.icon"></ion-icon>
        <span>{{ category.label }}</span>
      </div>
    </div>
  </div>

  <!-- Lista de Consejos -->
  <div class="tips-container">
    
    <!-- Contador de resultados -->
    <div class="results-header">
      <p class="text-muted">
        {{ filteredTips.length }} consejo{{ filteredTips.length !== 1 ? 's' : '' }} 
        {{ selectedCategory !== 'all' ? 'en ' + getCategoryLabel(selectedCategory) : '' }}
      </p>
      <ion-button 
        *ngIf="selectedCategory !== 'all' || searchTerm" 
        fill="clear" 
        size="small"
        (click)="clearFilters()">
        Limpiar filtros
      </ion-button>
    </div>

    <!-- Cards de consejos modernos -->
    <div class="tips-grid">
      <div *ngFor="let tip of filteredTips" class="tip-card-modern">
        <div class="tip-header-modern">
          <div class="tip-icon-wrapper" [style.background]="getCategoryGradient(tip.category)">
            <ion-icon [name]="tip.icon"></ion-icon>
          </div>
          <div class="tip-badges">
            <span class="category-badge" [style.background]="getCategoryColor(tip.category)">
              {{ getCategoryLabel(tip.category) }}
            </span>
            <span 
              *ngIf="tip.difficulty"
              class="difficulty-badge"
              [style.background]="getDifficultyColor(tip.difficulty)">
              {{ translateDifficulty(tip.difficulty) }}
            </span>
          </div>
        </div>
        
        <div class="tip-content-modern">
          <h3>{{ tip.title }}</h3>
          <p class="tip-description">{{ tip.content }}</p>
          
          <div class="tip-footer-modern">
            <div class="read-time" *ngIf="tip.readTime">
              <ion-icon name="time-outline"></ion-icon>
              <span>{{ tip.readTime }} min</span>
            </div>
            <div class="tip-tags-modern" *ngIf="tip.tags && tip.tags.length > 0">
              <span class="tag" *ngFor="let tag of tip.tags.slice(0, 2)">
                #{{ tag }}
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Estado vacío (sin resultados) -->
    <div *ngIf="filteredTips.length === 0" class="empty-state">
      <ion-icon name="search-outline" size="large" color="medium"></ion-icon>
      <h2>No se encontraron consejos</h2>
      <p class="text-muted">
        Intenta con otra búsqueda o categoría
      </p>
      <ion-button (click)="clearFilters()">
        Ver todos los consejos
      </ion-button>
    </div>

  </div>

  <!-- Espaciado inferior -->
  <div style="height: 80px;"></div>

</ion-content>
